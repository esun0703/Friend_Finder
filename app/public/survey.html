<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
    <title>Friend Finder</title>
    <!--Jquery-->
    <script src="https://code.jquery.com/jquery-2.2.3.js" integrity="sha256-laXWtGydpwqJ8JA+X9x2miwmaiKhn8tVmOVEigRNtP4=" crossorigin="anonymous"></script>
    

    <!--Materialize-->
     <script type="text/javascript" src="js/materialize.min.js"></script>
     <!--Basic JS-->
    <script type="text/javascript" src="js/js.js"></script>

    <!-- CSS  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  </head>
  <body>
    <div class="container">
      <div id="title">
        <h4>Survey Questions</h4>
      </div>
    <div class="row">
      <!---action = "/api/friends"-->
      <form  id="surveyForm" class="col s12">
        <h5>About Me</h5>
        <!--Name Input-->
        <div class="row">
          <div class="input-field col s6">
            <input id="name" type="text" class="validate">
            <!--added data-placeholder, class validate helps with below javascript for validate function-->
            <label for="name">Name (Required)</label>
          </div>
        </div>
        <!--Link For Image-->
        <div class="row">
          <div class="input-field col s6">
            <input id="photo" type="text" class="validate">
            <label for="photo">Link To Photo Image (Required) </label>
          </div>
        </div>

        <!--Question 1-->
        <div class="row">
          <div class="input-field col s12">
            <label>Question 1: Your Love For CSS Is Undying</label>
            <br><br>
            <select data-placeholder="" class="chosen-select" id="q1"><!--added data-placeholder, class, and id-->
              <option value="" disabled selected>Choose</option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
        </div>

        <!--Question 2-->
        <div class="row">
          <div class="input-field col s12">
            <label>Question 2: You Love Traveling  </label>
            <br><br>
            <select data-placeholder="" class="chosen-select" id="q2">
              <option value="" disabled selected>Choose</option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
        </div>

        <!--Question 3-->
        <div class="row">
          <div class="input-field col s12">
            <label>Question 3: You Like Pina Coladas Getting Caught In The Rain</label>
            <br><br>
            <select data-placeholder="" class="chosen-select" id="q3">
              <option value="" disabled selected>Choose</option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
        </div>

        <!--Question 4-->
        <div class="row">
          <div class="input-field col s12">
            <label>Question 4: You Think Trump Looks Like A Giant Cheeto</label>
            <br><br>
            <select data-placeholder="" class="chosen-select" id="q4">
              <option value="" disabled selected>Choose</option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
        </div>

        <!--Question 5-->
        <div class="row">
          <div class="input-field col s12">
            <label>Question 5: You Enjoy Spontaneous Dance Parties In Your Living Room</label>
            <br><br>
            <select data-placeholder="" class="chosen-select" id="q5">
              <option value="" disabled selected>Choose</option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
        </div>

        <!--Question 6-->
        <div class="row">
          <div class="input-field col s12">
            <label>Question 6: You Wish You Lived In Harry Potter World</label>
            <br><br>
            <select data-placeholder="" class="chosen-select" id="q6">
              <option value="" disabled selected>Choose</option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
        </div>

        <!--Question 7-->
        <div class="row">
          <div class="input-field col s12">
            <label>Question 7: You Love Video Games</label>
            <br><br>
            <select data-placeholder="" class="chosen-select" id="q7">
              <option value="" disabled selected>Choose</option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
        </div>

        <!--Question 8-->
        <div class="row">
          <div class="input-field col s12">
            <label>Question 8: You Have A Dark Sense Of Humor</label>
            <br><br>
            <select data-placeholder="" class="chosen-select" id="q8">
              <option value="" disabled selected>Choose</option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
        </div>

        <!--Question 9-->
        <div class="row">
          <div class="input-field col s12">
            <label>Question 9: You Have An Obsession With Monster Energy Drinks</label>
            <br><br>
            <select data-placeholder="" class="chosen-select" id="q9">
              <option value="" disabled selected>Choose</option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
        </div>

        <!--Question 10-->
        <div class="row">
          <div class="input-field col s12">
            <label>Question 10: You Enjoy Doing Martial Arts</label>
            <br><br>
            <select data-placeholder="" class="chosen-select" id="q10">
              <option value="" disabled selected>Choose</option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
        </div>

        <!--Submit Button/Modal Trigger-->
<!--         data-target="modal1"

 -->        
        <a class="waves-effect waves-light btn" href="#modal1"  id = "submit">Modal</a>

        <!-- Modal Structure -->
        <div id="modal1" class="modal modal-fixed-footer">
          <div class="modal-content">
            <h4 id="modalHeader"></h4>
            <div id="friendBody">
              <h6 id="friendName"></h6>
              <img id="friendImg" src="">
            </div>
          </div>
          <!-- Modal Footer -->
          <div class="modal-footer">
            <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>
          </div>
        </div>
        <!--End-->
      </form>
    </div>
  </body>
  <!--handlers for get and post requests-->
  <script type="text/javascript"> 
    
    //takes front end and makes the posts
    $("#submit").on("click", function(){
      

      // validation function callback
      // Form Validation Function
      function validateForm() {
        var isValid = true;
        $('.validate').each(function() {
          if ( $(this).val() === '' )
              isValid = false;
              console.log(this)
        });

        //option:selected is specificially for Materialize
        $('.chosen-select option:selected').each(function() {

          if( $(this).val() === "")
            isValid = false;
            console.log(this)
        })
        return isValid;
      };

      //if validated
      if(validateForm() == true){
        console.log("blargh");

      //where we keep the new form elements
        var newFriend = {
          "name":$("#name").val(),
          "photo":$("#photo").val(),
          "scores":[
             // $("#q1 option:selected").val()),
             $("#q1").val(),
             $("#q2").val(),
             $("#q3").val(),
             $("#q4").val(),
             $("#q5").val(),
             $("#q6").val(),
             $("#q7").val(),
             $("#q8").val(),
             $("#q9").val(),
             $("#q10").val(),
           ]
        };

        // Grab the URL of the website
        var currentURL = window.location.origin;
        
        // console.log(newFriend);

            //post information 
        $.post(currentURL + "/api/friends", newFriend, function(data){
            $("#modalHeader").text("Your Best Match Is: ")
            //grab result friend max from AJAXX post
            $("#friendName").text(data.name);
            // console.log("(survey.html: Your Best Match Is " + data.name);
            $("#friendImg").attr("src", data.photo);    
        });

      //end of if statement   
      } else {
          console.log("need to fill out photo and image")
          $("#modalHeader").text("Please Fill Out All Forms: ")
          //grab result friend max from AJAXX post
          $("#friendName").text("No Friends Yet: Fill Out Survey");
          // console.log("(survey.html: Your Best Match Is " + data.name);
          $("#friendImg").attr("src", "http://s2.quickmeme.com/img/e7/e7c608ed8a5cfd0cc3fd3511882a4b1d9ad2f8f452943c47238a002c2e085db3.jpg"); 
      } 
    //end submit handler  
    });
  </script>
 </html>